<!-- Item Grid - Shared partial for displaying products or components -->
<div class="mb-6 flex justify-between items-center">
    <h2 class="text-xl font-semibold text-[#313131]" role="status" aria-live="polite">
        {% if items %}
            Viewing {{ items.start_index }}-{{ items.end_index }} of {{ items.paginator.count }}
        {% else %}
            No {{ item_type }}s found
        {% endif %}
    </h2>
</div>

{% if items %}
    <div id="item-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        {% for item in items %}
            <div class="bg-white rounded-2xl shadow-sm border border-[#E1E4E8] group flex flex-col hover:shadow-lg hover:border-[#0089D9] transition-all duration-300 mobile-card mobile-touch-target">
                <div class="relative">
                    <div class="aspect-square bg-white rounded-t-2xl overflow-hidden relative">
                        {% if item.image %}
                            <img src="{{ item.image }}" alt="{{ item.name }}" class="w-full h-full object-contain p-2 group-hover:scale-105 transition-transform duration-300">
                        {% else %}
                            <div class="w-full h-full flex items-center justify-center text-[#505050]">
                                <div class="text-center">
                                    <svg class="w-16 h-16 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
                                    </svg>
                                    <p class="text-sm">No Image</p>
                                </div>
                            </div>
                        {% endif %}
                        
                        <!-- Quick View Overlay -->
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100">
                            <button onclick="openQuickView('{{ item.id }}')" class="bg-white text-[#313131] px-4 py-2 rounded-lg shadow-lg font-medium hover:bg-[#F5F6F8] transition-colors ripple">
                                Quick View
                            </button>
                        </div>
                        
                        <!-- Compare Checkbox (Components Only) - HIDDEN FOR DEBUGGING -->
                        {% comment %}
                        {% if item_type == 'component' %}
                        <div class="absolute top-2 right-2 transition-opacity duration-300 opacity-0 group-hover:opacity-100" id="compare-checkbox-{{ item.id }}">
                            <label class="flex items-center justify-center w-6 h-6 bg-white rounded-full shadow-md cursor-pointer hover:bg-blue-50">
                                <input type="checkbox" class="compare-checkbox sr-only" data-component-id="{{ item.id }}" onchange="toggleCompare(this)">
                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center checkbox-visual">
                                    <svg class="w-3 h-3 text-white hidden checkmark" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            </label>
                        </div>
                        {% endif %}
                        {% endcomment %}
                    </div>
                </div>
                
                <div class="p-5 flex flex-col flex-grow">
                    <div class="mb-3">
                        <h3 class="font-semibold text-[#313131] line-clamp-2 leading-tight mb-2 group-hover:text-[#0089D9] transition-colors">{{ item.name }}</h3>
                        {% if item_type == 'product' and item.status.name != 'Active' %}
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium
                                {% if item.status.name == 'Discontinued' %}bg-red-100 text-red-800
                                {% elif item.status.name == 'Pre-release' %}bg-yellow-100 text-yellow-800
                                {% else %}bg-gray-100 text-gray-800{% endif %}">
                                {{ item.status.name }}
                            </span>
                        {% endif %}
                    </div>
                    
                    <div class="space-y-2 mb-4">
                        {% if item.brand %}
                            <div class="text-sm">
                                <span id="brand-{{ item.id }}" class="inline-flex items-center px-2 py-1 rounded text-xs font-semibold text-white" 
                                      data-brand-color="{{ item.brand.color|default:'#6b7280' }}"
                                      data-brand-bg="{{ item.brand.color|default:'#6b7280' }}">
                                    {{ item.brand.name }}
                                </span>
                            </div>
                        {% endif %}
                        {% if item.sku %}
                            <div class="flex items-center text-sm text-[#505050]">
                                <span class="font-medium w-16">Model#:</span>
                                <span class="font-medium">{{ item.sku }}</span>
                            </div>
                        {% endif %}
                        
                        <!-- Fair Price (Components Only) -->
                        {% if item_type == 'component' and show_fair_price and item.fair_price_narrative %}
                            {% if item.fair_price_narrative.fair_price %}
                            <div class="flex items-center text-sm text-green-600">
                                <span class="font-medium w-16">Fair:</span>
                                <span class="font-semibold">${{ item.fair_price_narrative.fair_price }}</span>
                            </div>
                            {% endif %}
                        {% endif %}
                    </div>

                    <div class="mt-auto">
                        <a href="{% if item_type == 'product' %}{% url 'product_detail' item.id %}{% else %}{% url 'component_detail' item.id %}{% endif %}" class="block w-full bg-[#0089D9] text-white py-2.5 px-4 rounded-lg text-sm font-medium hover:bg-[#006FB3] text-center transition-colors group/btn">
                            View Details
                            <svg class="w-4 h-4 inline-block ml-1 group-hover/btn:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    {% include 'frontend/catalog/empty_state.html' %}
{% endif %}


