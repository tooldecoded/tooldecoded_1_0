{% extends 'components_backoffice/base.html' %}

{% block content %}
<h2>Components</h2>

<form method="get" style="margin-bottom: 1rem;">
  <input type="text" name="q" value="{{ q }}" placeholder="Search by name" />
  <select name="page_size">
    {% for size in page_size_options %}
      <option value="{{ size }}" {% if page_size == size %}selected{% endif %}>{{ size }}</option>
    {% endfor %}
  </select>
  <button type="submit">Apply</button>
  {% if q %}<a href="?">Clear</a>{% endif %}
  <span style="margin-left: 1rem;">Total: {{ page_obj.paginator.count }}</span>
  <span style="margin-left: 1rem;">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
{% csrf_token %}
</form>

<table border="1" cellpadding="6" cellspacing="0">
  {% load backoffice_extras %}
  <thead>
    <tr>
      {% for col in columns %}
        <th>{{ col.label }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for c in page_obj.object_list %}
      <tr>
        {% for col in columns %}
          <td>{{ c|get_attr:col.name|default:"-" }}</td>
        {% endfor %}
      </tr>
    {% empty %}
      <tr><td colspan="{{ columns|length }}">No results</td></tr>
    {% endfor %}
  </tbody>
</table>

<div style="margin-top: 1rem;">
  {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}&page_size={{ page_size }}&q={{ q }}">Previous</a>
  {% endif %}
  {% if page_obj.has_next %}
    <a style="margin-left: 1rem;" href="?page={{ page_obj.next_page_number }}&page_size={{ page_size }}&q={{ q }}">Next</a>
  {% endif %}
</div>
{% endblock %}


